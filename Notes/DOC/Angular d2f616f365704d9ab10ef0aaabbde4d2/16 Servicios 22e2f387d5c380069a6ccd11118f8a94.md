# 16. Servicios

Los servicios son piezas fundamentales en Angular para **compartir l√≥gica, manejar datos, hacer peticiones HTTP, gestionar estado**, etc. Suelen estar **inyectados en componentes u otros servicios**, y son parte del **sistema de inyecci√≥n de dependencias (DI)** de Angular.

---

## üß± ¬øQu√© es un servicio?

Es una clase **decorada con `@Injectable()`** que se registra como dependiente y se puede inyectar en componentes, otros servicios, pipes, etc.

---

## üÜï En Angular v20:

- Puedes seguir usando la forma cl√°sica con `providedIn: 'root'`.
- O usar el **nuevo `provideService()` standalone**, que est√° m√°s alineado con los componentes standalone modernos.

---

# ‚úÖ 1. Servicio cl√°sico (`providedIn: 'root'`)

### üìÅ `logger.service.ts`

```tsx

import { Injectable } from '@angular/core';

@Injectable({
  providedIn: 'root'
})
export class LoggerService {
  log(mensaje: string) {
    console.log(`[LOG]: ${mensaje}`);
  }
}

```

Esto hace que el servicio est√© disponible **en toda la app**, sin necesidad de importarlo manualmente.

---

### üß† Uso en un componente

```tsx

import { Component } from '@angular/core';
import { LoggerService } from './logger.service';

@Component({
  selector: 'app-ejemplo',
  template: `<button (click)="saludar()">Saludar</button>`,
})
export class EjemploComponent {
  constructor(private logger: LoggerService) {}

  saludar() {
    this.logger.log('Hola desde el componente');
  }
}

```

---

# üÜï 2. Servicio standalone con `provideService`

### üìÅ `contador.service.ts`

```tsx

import { Injectable, signal } from '@angular/core';

@Injectable()
export class ContadorService {
  private _valor = signal(0);
  readonly valor = this._valor.asReadonly();

  incrementar() {
    this._valor.update(v => v + 1);
  }

  reiniciar() {
    this._valor.set(0);
  }
}

```

---

### üß† Uso en un componente standalone

```tsx

import { Component, inject } from '@angular/core';
import { ContadorService } from './contador.service';

@Component({
  selector: 'app-contador',
  standalone: true,
  template: `
    <h2>Contador: {{ contador.valor() }}</h2>
    <button (click)="contador.incrementar()">Incrementar</button>
    <button (click)="contador.reiniciar()">Reiniciar</button>
  `,
  providers: [ContadorService]
})
export class ContadorComponent {
  contador = inject(ContadorService);
}

```

üìå El servicio **solo est√° disponible para este componente y sus hijos**, porque est√° en `providers`.

---

# üåê 3. Servicio HTTP: peticiones a APIs

### üìÅ `usuarios.service.ts`

```tsx

import { Injectable } from '@angular/core';
import { HttpClient } from '@angular/common/http';
import { Observable } from 'rxjs';

@Injectable({ providedIn: 'root' })
export class UsuariosService {
  constructor(private http: HttpClient) {}

  obtenerUsuarios(): Observable<any[]> {
    return this.http.get<any[]>('https://jsonplaceholder.typicode.com/users');
  }
}

```

### Uso:

```tsx

constructor(private usuariosService: UsuariosService) {}

ngOnInit() {
  this.usuariosService.obtenerUsuarios().subscribe(usuarios => {
    console.log(usuarios);
  });
}

```

---

# üß† ¬øCu√°ndo usar cada forma?

| Situaci√≥n | Forma recomendada |
| --- | --- |
| L√≥gica compartida en toda la app | `providedIn: 'root'` |
| Servicio espec√≠fico de un m√≥dulo o componente | `providers: [Servicio]` en ese componente |
| Proyecto standalone (sin m√≥dulos) | `@Injectable()` + `providers: []` en componentes |
| Estado reactivo (signals, stores) | `signal()` dentro del servicio |

[Proyecto servicios con signals ](16%20Servicios%2022e2f387d5c380069a6ccd11118f8a94/Proyecto%20servicios%20con%20signals%202302f387d5c380bcb4a9c1313553f381.md)

[Proyecto servicio con llamada API ](16%20Servicios%2022e2f387d5c380069a6ccd11118f8a94/Proyecto%20servicio%20con%20llamada%20API%202302f387d5c38074a5b8df5b0803e1c7.md)